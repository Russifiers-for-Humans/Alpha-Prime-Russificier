const int KC_ESCAPE          = 0x01
const int KC_1               = 0x02
const int KC_2               = 0x03
const int KC_3               = 0x04
const int KC_4               = 0x05
const int KC_5               = 0x06
const int KC_6               = 0x07
const int KC_7               = 0x08
const int KC_8               = 0x09
const int KC_9               = 0x0a
const int KC_0               = 0x0b
const int KC_MINUS           = 0x0c    /* - on main keyboard */
const int KC_EQUALS          = 0x0d
const int KC_BACK            = 0x0e    /* backspace */
const int KC_TAB             = 0x0f
const int KC_Q               = 0x10
const int KC_W               = 0x11
const int KC_E               = 0x12
const int KC_R               = 0x13
const int KC_T               = 0x14
const int KC_Y               = 0x15
const int KC_U               = 0x16
const int KC_I               = 0x17
const int KC_O               = 0x18
const int KC_P               = 0x19
const int KC_LBRACKET        = 0x1a
const int KC_RBRACKET        = 0x1b
const int KC_RETURN          = 0x1c    /* Enter on main keyboard */
const int KC_LCONTROL        = 0x1d
const int KC_A               = 0x1e
const int KC_S               = 0x1f
const int KC_D               = 0x20
const int KC_F               = 0x21
const int KC_G               = 0x22
const int KC_H               = 0x23
const int KC_J               = 0x24
const int KC_K               = 0x25
const int KC_L               = 0x26
const int KC_SEMICOLON       = 0x27
const int KC_APOSTROPHE      = 0x28
const int KC_GRAVE           = 0x29    /* accent grave */
const int KC_LSHIFT          = 0x2a
const int KC_BACKSLASH       = 0x2b
const int KC_Z               = 0x2c
const int KC_X               = 0x2d
const int KC_C               = 0x2e
const int KC_V               = 0x2f
const int KC_B               = 0x30
const int KC_N               = 0x31
const int KC_M               = 0x32
const int KC_COMMA           = 0x33
const int KC_PERIOD          = 0x34    /* . on main keyboard */
const int KC_SLASH           = 0x35    /* / on main keyboard */
const int KC_RSHIFT          = 0x36
const int KC_MULTIPLY        = 0x37    /* * on numeric keypad */
const int KC_LMENU           = 0x38    /* left Alt */
const int KC_SPACE           = 0x39
const int KC_CAPITAL         = 0x3a
const int KC_F1              = 0x3b
const int KC_F2              = 0x3c
const int KC_F3              = 0x3d
const int KC_F4              = 0x3e
const int KC_F5              = 0x3f
const int KC_F6              = 0x40
const int KC_F7              = 0x41
const int KC_F8              = 0x42
const int KC_F9              = 0x43
const int KC_F10             = 0x44
const int KC_NUMLOCK         = 0x45
const int KC_SCROLL          = 0x46    /* Scroll Lock */
const int KC_NUMPAD7         = 0x47
const int KC_NUMPAD8         = 0x48
const int KC_NUMPAD9         = 0x49
const int KC_SUBTRACT        = 0x4a    /* - on numeric keypad */
const int KC_NUMPAD4         = 0x4b
const int KC_NUMPAD5         = 0x4c
const int KC_NUMPAD6         = 0x4d
const int KC_ADD             = 0x4e    /* + on numeric keypad */
const int KC_NUMPAD1         = 0x4f
const int KC_NUMPAD2         = 0x50
const int KC_NUMPAD3         = 0x51
const int KC_NUMPAD0         = 0x52
const int KC_DECIMAL         = 0x53    /* . on numeric keypad */
const int KC_OEM_102         = 0x56    /* < > | on UK/Germany keyboards */
const int KC_F11             = 0x57
const int KC_F12             = 0x58
const int KC_NUMPADEQUALS    = 0x8d    /* = on numeric keypad (NEC PC98) */
const int KC_PREVTRACK       = 0x90    /* Previous Track (DIKC_CIRCUMFLEX on Japanese keyboard) */
const int KC_AT              = 0x91    /*                     (NEC PC98) */
const int KC_COLON           = 0x92    /*                     (NEC PC98) */
const int KC_UNDERLINE       = 0x93    /*                     (NEC PC98) */
const int KC_STOP            = 0x95    /*                     (NEC PC98) */
const int KC_AX              = 0x96    /*                     (Japan AX) */
const int KC_UNLABELED       = 0x97    /*                        (J3100) */
const int KC_NEXTTRACK       = 0x99    /* Next Track */
const int KC_NUMPADENTER     = 0x9c    /* Enter on numeric keypad */
const int KC_RCONTROL        = 0x9d
const int KC_MUTE            = 0xa0    /* Mute */
const int KC_CALCULATOR      = 0xa1    /* Calculator */
const int KC_PLAYPAUSE       = 0xa2    /* Play / Pause */
const int KC_MEDIASTOP       = 0xa4    /* Media Stop */
const int KC_VOLUMEDOWN      = 0xae    /* Volume - */
const int KC_VOLUMEUP        = 0xb0    /* Volume + */
const int KC_WEBHOME         = 0xb2    /* Web home */
const int KC_NUMPADCOMMA     = 0xb3    /* , on numeric keypad (NEC PC98) */
const int KC_DIVIDE          = 0xb5    /* / on numeric keypad */
const int KC_SYSRQ           = 0xb7
const int KC_RMENU           = 0xb8    /* right Alt */
const int KC_PAUSE           = 0xc5    /* Pause */
const int KC_HOME            = 0xc7    /* Home on arrow keypad */
const int KC_UP              = 0xc8    /* UpArrow on arrow keypad */
const int KC_PRIOR           = 0xc9    /* PgUp on arrow keypad */
const int KC_LEFT            = 0xcb    /* LeftArrow on arrow keypad */
const int KC_RIGHT           = 0xcd    /* RightArrow on arrow keypad */
const int KC_END             = 0xcf    /* End on arrow keypad */
const int KC_DOWN            = 0xd0    /* DownArrow on arrow keypad */
const int KC_NEXT            = 0xd1    /* PgDn on arrow keypad */
const int KC_INSERT          = 0xd2    /* Insert on arrow keypad */
const int KC_DELETE          = 0xd3    /* Delete on arrow keypad */
const int KC_LWIN            = 0xdb    /* Left Windows key */
const int KC_RWIN            = 0xdc    /* Right Windows key */
const int KC_APPS            = 0xdd    /* AppMenu key */
const int KC_POWER           = 0xde    /* System Power */
const int KC_SLEEP           = 0xdf    /* System Sleep */
const int KC_WAKE            = 0xe3    /* System Wake */
const int KC_MEDIASELECT     = 0xed    /* Media Select */


//-----------------------------------------------------------------
#ifdef _XBOX

const int JB_A				= 0
const int JB_B				= 1
const int JB_X				= 2
const int JB_Y				= 3
const int JB_BLACK		= 4
const int JB_WHITE		= 5
const int JB_LTRIGGER	= 6
const int JB_RTRIGGER	= 7
const int JB_DPAD_UP		= 8
const int JB_DPAD_DOWN	= 9
const int JB_DPAD_LEFT	= 10
const int JB_DPAD_RIGHT	= 11
const int JB_START		= 12
const int JB_BACK			= 13
const int JB_LTHUMB		= 14
const int JB_RTHUMB		= 15

int JoyButtons2[16]

bool JoyButtonState(int butt, bool clear = false)
{
	if(JoyButtons2[butt] == 1)
	{
		if(clear)
			JoyButtons2[butt] = -1
		
		return true
	}
	
	return false
}

void ClearJoyButton(int butt)
{
	JoyButtons2[butt] = -1
}

void UpdateJoyButtons()
{
	for(int n = 0; n < 16; n++)
	{
		if(JoyButtons[n])
		{
			if(JoyButtons2[n] != -1)
				JoyButtons2[n] = 1
		}
		else
			JoyButtons2[n] = 0
	}
	
}
#endif

const int MOVE_F = 0	//3
const int MOVE_B = 1	//4
const int LEFT = 2	//5
const int RIGHT = 3	//6
const int JUMP = 4	//10
const int CROUCH = 5	//11
const int WALK_MODE = 8	//11
const int P_ATTACK = 14	//1
const int S_ATTACK = 15	//2
const int PREV_WEAPON = 17	//9
const int NEXT_WEAPON = 18	//8
const int RELOAD = 16	//7
const int USE = 9	//0
const int FLASHLIGHT = 12
const int CONTROLLER = 10
const int BULLET_TIME = 11
const int TASKLIST = 13
const int LEAN_LEFT = 6
const int LEAN_RIGHT = 7

const int WEAP_JACKHAMMER = 19
const int WEAP_PISTOL = 20
const int WEAP_SHOTGUN = 21
const int WEAP_MACHINEGUN = 22
const int WEAP_SNIPER_RIFLE = 23
const int WEAP_ROCKET_LAUNCHER = 24
const int WEAP_FLAMETHROWER = 25
const int WEAP_GRENADE = 26

const int QUICKLOAD = 27
const int QUICKSAVE = 28

#ifndef XBOX
//xbox klavesy ktore su navyse
#endif


int g_KeyDef1[256]
int g_KeyDef2[256]
int g_KeyDef1_temp[256]
int g_KeyDef2_temp[256]
int g_MouseState[14] =  {-1, -2, -3, -4, -5,
								-6, -7, -8, -9, -10, -11, -12, -13}

int g_JoyButtons[8]
int g_LMB			//Status of Left Mouse Button.
int g_MMB			//MMB
int g_RMB			//RMB
int g_WHEEL_UP		//MMB
int g_WHEEL_DOWN	//RMB

#ifndef _XBOX
void UpdateMouseButtons()
{
	for(int n = 0; n < 8; n++)
	{
  		if(g_JoyButtons[n] != -1)
  			g_JoyButtons[n] = JoyButtons[n]
	  	else
  		{
  			if(JoyButtons[n] == 0)
	  			g_JoyButtons[n] = 0
 	 	}
	}
  	if(g_LMB != -1)
  	{
  		g_LMB = LMB
  	}
  	else
  	{
  		if(LMB == 0)
  			g_LMB = 0
  	}

  	if(g_MMB != -1)
  	{
  		g_MMB = MMB
  	}
  	else
  	{
  		if(MMB == 0)
  			g_MMB = 0
  	}

  	if(g_RMB != -1)
  	{
  		g_RMB = RMB
  	}
  	else
  	{
  		if(RMB == 0)
  			g_RMB = 0
  	}

  	if(g_WHEEL_UP != -1)
  	{
  		if(MouseWheel > 0)
  			g_WHEEL_UP = 1
  		else
  			g_WHEEL_UP = 0
  	}
  	else
  	{
  		if(MouseWheel <= 0)
  			g_WHEEL_UP = 0
  	}

  	if(g_WHEEL_DOWN != -1)
  	{
  		if(MouseWheel < 0)
  			g_WHEEL_DOWN = 1
  		else
  			g_WHEEL_DOWN = 0
  	}
  	else
  	{
  		if(MouseWheel >= 0)
  			g_WHEEL_DOWN = 0
  	}
}
#endif

//=================================================================================

int IsButtonSet(int code, bool clear)
{
	switch(code)
	{
	case -1:	//LMB
		if(g_LMB > 0)
		{
			if(clear)
				g_LMB = -1
			return code
		}
		return 0
	case -2:	//MMB
		if(g_MMB > 0)
		{
			if(clear)
				g_MMB = -1
			return code
		}
		return 0
	case -3:	//RMB
		if(g_RMB > 0)
		{
			if(clear)
				g_RMB = -1
			return code
		}
		return 0
	case -4:	//WheelUP
		if(g_WHEEL_UP > 0)
		{
			if(clear)
				g_WHEEL_UP = -1
			return code
		}
		return 0
	case -5:	//WheelDOWN
		if(g_WHEEL_DOWN > 0)
		{
			if(clear)
				g_WHEEL_DOWN = -1
			return code
		}
	}
	
	if(code <= -6)
	{
		int n = -code - 6
		
		if(g_JoyButtons[n] > 0)
		{
			if(clear)
				g_JoyButtons[n] = -1
			
			return code
		}
	}

	return 0
}

//pokud byla zmacknuta primarni nebo sekundarni nadefinovana klavesa tak vraci jeji keycode. Inak nulu
//Clear == true hned clearuje
int KEY(int def_key, bool Clear)
{
#ifdef _XBOX
	switch(def_key)
	{
		case USE:
			return JoyButtonState(JB_X, Clear)
		case P_ATTACK:
			return JoyButtonState(JB_RTRIGGER, Clear)
		case S_ATTACK:
			return JoyButtonState(JB_LTRIGGER, Clear)
		case MOVE_F:
			return JoyButtonState(JB_DPAD_UP, Clear)
		case MOVE_B:
			return JoyButtonState(JB_DPAD_DOWN, Clear)
		case LEFT:
			return JoyButtonState(JB_DPAD_LEFT, Clear)
		case RIGHT:
			return JoyButtonState(JB_DPAD_RIGHT, Clear)
		case JUMP:
			return JoyButtonState(JB_A, Clear)
		case CROUCH:
			return JoyButtonState(JB_B, Clear)
		case FLASHLIGHT:
			return JoyButtonState(JB_WHITE, Clear)
		case RELOAD:
			return JoyButtonState(JB_Y, Clear)
		
	}
	
	return 0
#endif
/*
#ifdef EDITOR
	if(World.EditorActive)
	{
		if(KeyState(g_KeyDef1[def_key])
		{
			if(def_key != MOVE_F && def_key != MOVE_B && def_key != LEFT && def_key != RIGHT)
				return 0
		}
		
		if(KeyState(g_KeyDef2[def_key])
		{
			if(def_key != MOVE_F && def_key != MOVE_B && def_key != LEFT && def_key != RIGHT)
				return 0
		}
	}
#endif
*/
	//Toto je volano opravdu hodnekrat, takze rychlost kodu je primarni. Na vzhled seru
	int key = g_KeyDef1[def_key]
	if(key != 0)
	{
		if(key > 0)
		{
			if(KeyState(key) == true)
			{
				if(Clear)
					ClearKey(key)
				return key
			}
			goto nokey1
		}

		if(IsButtonSet(key, Clear)) //je zmacknuto
			return key
	}
	
nokey1:
	key = g_KeyDef2[def_key]
	//stejne druha klavesa neexistuje
	if(key == 0)
		return 0

	if(key > 0)
	{
		if(KeyState(key) == true)
		{
			if(Clear)
				ClearKey(key)
			return key
		}
		return 0
	}
	else
		return IsButtonSet(key, Clear)
}
